<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio | Puzzles, Math, Quantitative Research</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- KaTeX for LaTeX rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmFAILfpeV" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

    <style>
        /* Custom styles for the pure black theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000; /* Pure black background */
            color: #ffffff; /* White text */
        }
        /* Style for KaTeX rendered math on dark background */
        .katex {
            color: #ffffff;
        }
        .katex-display {
            padding: 1rem;
            border: 1px solid #374151; /* Gray border for contrast */
            border-radius: 0.5rem;
            overflow-x: auto;
        }
        /* A simple transition for page content */
        .page-section {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="fixed top-0 left-0 right-0 bg-black bg-opacity-80 backdrop-blur-md z-10 border-b border-gray-700">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Name/Logo -->
                <div>
                    <a href="#about" class="text-xl font-bold tracking-wider text-white">Rohit Rawat</a>
                </div>
                <!-- Navigation Links -->
                <nav class="hidden md:flex space-x-8">
                    <a href="#about" class="text-gray-300 hover:text-white transition-colors duration-300">About</a>
                    <a href="#projects" class="text-gray-300 hover:text-white transition-colors duration-300">Projects</a>
                    <a href="#education" class="text-gray-300 hover:text-white transition-colors duration-300">Education</a>
                    <a href="#skills" class="text-gray-300 hover:text-white transition-colors duration-300">Skills</a>
                    <a href="#puzzles" class="text-gray-300 hover:text-white transition-colors duration-300">Puzzles</a>
                    <a href="#stuff" class="text-gray-300 hover:text-white transition-colors duration-300">Stuff</a>
                </nav>
                 <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-300 hover:text-white focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
        </div>
         <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4 border-t border-gray-700">
            <a href="#about" class="block py-2 text-gray-300 hover:text-white">About</a>
            <a href="#projects" class="block py-2 text-gray-300 hover:text-white">Projects</a>
            <a href="#education" class="block py-2 text-gray-300 hover:text-white">Education</a>
            <a href="#skills" class="block py-2 text-gray-300 hover:text-white">Skills</a>
            <a href="#puzzles" class="block py-2 text-gray-300 hover:text-white">Puzzles</a>
            <a href="#stuff" class="block py-2 text-gray-300 hover:text-white">Stuff</a>
        </div>
    </header>

<main class="container mx-auto px-6 pt-24">
     
      <section id="about" class="page-section min-h-[80vh] flex items-center justify-center">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12 items-center">
              <div class="md:col-span-1 flex justify-center">
                  <img src="https://placehold.co/400x400/000000/ffffff?text=JD" alt="Rohit Rawat" class="rounded-full w-48 h-48 md:w-64 md:h-64 object-cover border-4 border-gray-700 shadow-md">
              </div>
              <div class="md:col-span-2 text-center md:text-left">
                  <h1 class="text-4xl md:text-5xl font-bold leading-tight text-white">Rohit Rawat</h1>
                  <p class="mt-4 text-lg text-gray-300">Aspiring Quantitative Researcher & Puzzle Enthusiast</p>
                  <p class="mt-6 text-gray-200 max-w-xl mx-auto md:mx-0">
                      Welcome to my corner of the web. I'm driven by a passion for uncovering patterns, whether in complex financial markets, the elegant logic of a mathematical proof, or the deceptive simplicity of a well-crafted puzzle. I am extremely interested in quantitative research which is a natural extension of this curiosity, allowing me to apply rigorous analytical methods to solve challenging problems. This site showcases some of the projects and ideas that excite me.
                  </p>
              </div>
          </div>
      </section>
        <!-- Projects Section -->
        <section id="projects" class="page-section hidden py-20">
            <h2 class="text-3xl font-bold mb-12 text-center text-white">Projects</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Project 1 -->
                <div class="border border-gray-700 rounded-lg p-6 hover:shadow-lg hover:border-gray-500 hover:-translate-y-1 transition-all duration-300">
                    <h3 class="text-xl font-bold mb-2 text-white">Stochastic Volatility Modeling</h3>
                    <p class="text-gray-300">Implementation and backtesting of the Heston model to price European options. Utilized Monte Carlo simulations to analyze model performance against historical market data.</p>
                </div>
                <!-- Project 2 -->
                <div class="border border-gray-700 rounded-lg p-6 hover:shadow-lg hover:border-gray-500 hover:-translate-y-1 transition-all duration-300">
                    <h3 class="text-xl font-bold mb-2 text-white">Combinatorial Puzzle Solver</h3>
                    <p class="text-gray-300">Developed a solver for complex logic puzzles (e.g., Sudoku, Nonograms) using constraint propagation and backtracking algorithms in Python, exploring computational complexity.</p>
                </div>
                <!-- Project 3 -->
                <div class="border border-gray-700 rounded-lg p-6 hover:shadow-lg hover:border-gray-500 hover:-translate-y-1 transition-all duration-300">
                    <h3 class="text-xl font-bold mb-2 text-white">Time Series Anomaly Detection</h3>
                    <p class="text-gray-300">A research project on detecting anomalies in high-frequency financial data using statistical methods like ARIMA and machine learning models like Isolation Forest.</p>
                </div>
            </div>
        </section>

        <!-- Education Section -->
        <section id="education" class="page-section hidden py-20">
            <h2 class="text-3xl font-bold mb-12 text-center text-white">Education</h2>
            <div class="max-w-2xl mx-auto space-y-8">
                
                <div class="text-center">
                    <h3 class="text-xl font-bold text-white">B.S. in Economic Science</h3>
                    <p class="text-gray-300">Indian Institute of Science Education and Research Bhopal, 2022 - 2026</p>
                </div>
                <div class="text-center">
                    <h3 class="text-xl font-bold text-white">Double Diploma in Data Science and Programming</h3>
                    <p class="text-gray-300">Indian Institute of Technology Madras, 2023 - 2026</p>
                </div>
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="page-section hidden py-20">
            <h2 class="text-3xl font-bold mb-12 text-center text-white">Technical Skills</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">Programming Languages</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li>Python</li>
                        <li>R</li>
                        <li>C++(STL)</li>
                        <li>SQL</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">Libraries & Frameworks</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li>Pandas, NumPy, SciPy, Statmodels</li>
                        <li>Scikit-learn, Keras</li>
                        <li>Plotly, Matplotlib, Seaborn</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">Quantitative Analysis</h3>
                    <ul class="space-y-2 text-gray-300">
                        <li>Statistical Analysis</li>
                        <li>Probabilistic Modeling</li>
                        <li>Econometrics</li>
                        <li>Machine Learning</li>
                        <li>Time Series Analysis</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Puzzle Corner Section -->
        <section id="puzzles" class="page-section hidden py-20">
            <h2 class="text-3xl font-bold mb-12 text-center text-white">Puzzle Corner</h2>
            
            <!-- Interactive Puzzle -->
            <div class="max-w-md mx-auto text-center bg-black border border-gray-700 rounded-lg p-8 mb-16">
                <h3 class="text-xl font-bold text-white mb-2">Try a Puzzle: The 24 Game</h3>
                <p class="text-gray-300 mb-6">Use the numbers below with `+`, `-`, `*`, `/`, and parentheses to make 24.</p>
                <div id="puzzle-numbers" class="text-4xl font-bold tracking-widest mb-6 bg-gray-900 p-4 rounded-md">
                    <!-- Numbers will be injected here by JS -->
                </div>
                <input id="puzzle-input" type="text" placeholder="Your solution: (e.g., 8*6/2)" class="w-full bg-gray-800 border border-gray-600 rounded-md px-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500">
                <div class="mt-4 flex justify-center space-x-4">
                    <button id="check-puzzle-btn" class="bg-white text-black px-6 py-2 rounded-md hover:bg-gray-200 transition-colors">Check</button>
                    <button id="new-puzzle-btn" class="bg-gray-700 text-white px-6 py-2 rounded-md hover:bg-gray-600 transition-colors">New Puzzle</button>
                </div>
                <p id="puzzle-feedback" class="mt-4 h-6 text-sm"></p>
            </div>

            <!-- Favorite Puzzles Collection -->
            <div class="max-w-3xl mx-auto">
                <h3 class="text-2xl font-bold text-center mb-8 text-white">A Collection of Interesting Puzzles</h3>
                
                <!-- Puzzle 1 -->
                <div class="border border-gray-700 rounded-lg p-6 mb-8">
                    <h4 class="text-xl font-bold mb-2 text-white">The Bridge Crossing Problem</h4>
                    <p class="text-gray-300 mb-4">
                        Four people need to cross a rickety bridge at night. They have only one flashlight, and the bridge can only support two people at a time. The flashlight must be carried back and forth for each crossing. Each person walks at a different speed: one takes 1 minute to cross, another 2 minutes, another 5 minutes, and the last one 10 minutes. When two people cross together, they move at the slower person's pace. What is the minimum time required for all four to cross?
                    </p>
                    <button class="toggle-solution-btn bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors">Show Solution</button>
                    <div class="solution hidden mt-4 p-4 bg-gray-900 rounded-md">
                        <p><span class="font-bold">Total Time: 17 minutes.</span></p>
                        <ol class="list-decimal list-inside mt-2 text-gray-400">
                            <li>1 and 2 cross (2 min)</li>
                            <li>1 returns with flashlight (1 min)</li>
                            <li>5 and 10 cross (10 min)</li>
                            <li>2 returns with flashlight (2 min)</li>
                            <li>1 and 2 cross (2 min)</li>
                        </ol>
                    </div>
                </div>

                <!-- Puzzle 2 -->
                <div class="border border-gray-700 rounded-lg p-6">
                    <h4 class="text-xl font-bold mb-2 text-white">The Three Hats Problem</h4>
                    <p class="text-gray-300 mb-4">
                        Three logicians are captured by a king and are to be tested. The king shows them three white hats and two black hats. He then places a hat on each of their heads. The logicians can see the other two's hats but not their own. The king asks the first logician if he knows the color of his hat. He says "No." The king asks the second, who also says "No." The king asks the third, who says "Yes, my hat is white." How did the third logician know?
                    </p>
                    <button class="toggle-solution-btn bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors">Show Solution</button>
                    <div class="solution hidden mt-4 p-4 bg-gray-900 rounded-md">
                        <p class="text-gray-400">
                            Logician 3 reasons as follows: "If my hat were black, Logician 2 would have seen one black hat (mine) and would have reasoned: 'I see a black hat on Logician 3. If my hat were also black, Logician 1 would have seen two black hats and known his was white (since there are only two black hats). Since Logician 1 said 'No', my hat must be white.' But Logician 2 also said 'No'. This means my hat cannot be black, because if it were, Logician 2 would have known his own hat color. Therefore, my hat must be white."
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stuff Section -->
        <section id="stuff" class="page-section hidden py-20">
            <h2 class="text-3xl font-bold mb-12 text-center text-white">Stuff I Find Interesting</h2>
            <div class="max-w-3xl mx-auto">
            <h3 class="text-2xl font-bold mb-4 text-white">Duality of AR and MA Processes</h3>
                <p class="text-gray-300 mb-6">This illustrates the fundamental duality between Autoregressive (AR) and Moving Average (MA) processes. Under certain conditions, a finite-order process can be represented as an infinite-order process of the other type, a concept central to time series modeling.</p>
                             <div id="latex-example">\
                            
$$
\begin{aligned}
& \text{Consider a stationary AR(1) process, defined by } X_t = \phi X_{t-1} + \varepsilon_t, \text{ with } |\phi|<1. \\
& \text{Using the backshift operator } B \text{ (where } BX_t = X_{t-1}\text{), we can write:} \\
& (1 - \phi B)X_t = \varepsilon_t \\
& \text{Formally inverting the polynomial in } B \text{ gives the MA(}\infty\text{) representation:} \\
& X_t = (1 - \phi B)^{-1} \varepsilon_t = \sum_{j=0}^{\infty} (\phi B)^j \varepsilon_t = \sum_{j=0}^{\infty} \phi^j \varepsilon_{t-j} \\
\\
& \text{Conversely, consider an invertible MA(1) process, } X_t = \varepsilon_t + \theta \varepsilon_{t-1}, \text{ with } |\theta|<1. \\
& \text{In backshift notation, this is } X_t = (1 + \theta B)\varepsilon_t. \\
& \text{We can express the noise } \varepsilon_t \text{ in terms of past values of } X_t \text{ by inverting:} \\
& \varepsilon_t = (1 + \theta B)^{-1} X_t = \sum_{j=0}^{\infty} (-\theta B)^j X_t = X_t - \theta X_{t-1} + \theta^2 X_{t-2} - \dots \\
\\
& \text{This duality is crucial, as it allows complex ARMA processes to be approximated} \\
& \text{by high-order AR or MA models, simplifying estimation and analysis.}
\end{aligned}
$$
            </div>
            </div>

<div class="max-w-3xl mx-auto">
                <h3 class="text-2xl font-bold mb-4 text-white">Undefined Moments of the Cauchy Distribution</h3>
                <p class="text-gray-300 mb-6">The Cauchy distribution is a famous counterexample in probability and statistics. While its bell-shaped curve resembles the normal distribution, its 'heavy tails' lead to the surprising property that its mean, variance, and all higher moments are undefined.</p>
                            <div id="latex-example">
$$
\begin{aligned}
& \text{The standard Cauchy distribution is defined by the probability density function (PDF):} \\
& f(x) = \frac{1}{\pi(1+x^2)} \quad \text{for } x \in \mathbf{R} \\
\\
& \text{Let's attempt to calculate its mean (the first moment), } \mathbb{E}[X]: \\
& \mathbb{E}[X] = \int_{-\infty}^{\infty} x f(x) dx = \int_{-\infty}^{\infty} \frac{x}{\pi(1+x^2)} dx \\
\\
& \text{For this improper integral to be defined, it must converge absolutely. We test this:} \\
& \int_{-\infty}^{\infty} \left| \frac{x}{\pi(1+x^2)} \right| dx = 2 \int_{0}^{\infty} \frac{x}{\pi(1+x^2)} dx \\
\\
& \text{Using the substitution } u = 1+x^2, \text{ so } du = 2x dx: \\
& = \frac{1}{\pi} \int_{1}^{\infty} \frac{1}{u} du = \frac{1}{\pi} \left[ \ln|u| \right]_{1}^{\infty} \\
\\
& \text{As the upper limit goes to infinity, } \ln(u) \to \infty. \text{ The integral diverges.} \\
& \text{Because the integral for the expected value does not converge absolutely, the mean is} \\
& \text{formally undefined. Note that its Cauchy Principal Value is 0, but this is not the mean.} \\
\\
& \text{Since the first moment (mean) is undefined, all higher-order moments, such as} \\
& \text{variance, are also undefined for the Cauchy distribution.}
\end{aligned}
$$
                </div>
            </div>

<div class="max-w-3xl mx-auto">
    <h3 class="text-2xl font-bold mb-4 text-white">Braess's Paradox</h3>
    <p class="text-gray-300 mb-6">Braess's Paradox demonstrates the mind-bending and counter-intuitive idea that adding a new, high-capacity road to a congested traffic network can actually make travel time worse for every single person. It reveals a fundamental conflict between individual rational decision-making and optimal system-wide performance.</p>
    <div id="latex-example">
$$
\begin{aligned}
& \text{Imagine 4000 drivers want to travel from START to END. Let } T \text{ be the number of cars} \\
& \text{on a road. The initial network has two routes:} \\
& \text{Route 1 (Top): START} \to A \to \text{END} \\
& \text{Route 2 (Bottom): START} \to B \to \text{END} \\
\\
& \text{The travel time for each segment is:} \\
& \text{START} \to A: T/100 \text{ mins} \qquad \text{START} \to B: 45 \text{ mins} \\
& A \to \text{END}: 45 \text{ mins} \qquad \qquad B \to \text{END}: T/100 \text{ mins} \\
\\
& \text{At equilibrium, traffic splits evenly: 2000 cars take the top route, 2000 take the bottom.} \\
& \text{The travel time for any driver is } (2000/100) + 45 = \text{\textbf{65 minutes}}. \\
\\
& \text{\textbf{Now, we add a super-fast road from A to B with a travel time of 0.}} \\
& \text{A rational driver will always prefer the new path: START} \to A \to B \to \text{END.} \\
& \text{The new equilibrium: All 4000 drivers take this new route.} \\
\\
& \text{Let's calculate the new travel time:} \\
& (\text{Time on START}\to A) + (\text{Time on } A \to B) + (\text{Time on } B \to \text{END}) \\
& = (4000/100) + 0 + (4000/100) = 40 + 0 + 40 = \text{\textbf{80 minutes}}. \\
\\
& \text{\textbf{The Paradox:}} \text{ By adding a new, perfect road, we made the commute for} \\
& \text{every single driver increase from 65 to 80 minutes.}
\end{aligned}
$$
    </div>
    </div>
<div class="max-w-3xl mx-auto">
      <h3 class="text-2xl font-bold mb-4 text-white">Benford's Law (The First-Digit Law)</h3>
      <p class="text-gray-300 mb-6">Benford's Law is a fascinating and deeply counter-intuitive observation about the frequency of leading digits in many real-life sets of numerical data. Instead of being uniformly distributed (11.1% each), the digit '1' appears as the leading digit about 30% of the time, while '9' appears less than 5% of the time. It's so reliable it's used to detect fraud!</p>
      <div id="latex-example">
$$
\begin{aligned}
& \text{Benford's Law states that the probability } P \text{ of a number having a first digit } d \in \{1, \dots, 9\} \\
& \text{is given by the logarithmic formula:} \\
& \qquad P(d) = \log_{10}\left(1 + \frac{1}{d}\right) \\
\\
& \text{Let's calculate this for the most and least common digits:} \\
& P(d=1) = \log_{10}(1 + 1/1) = \log_{10}(2) \approx 0.301 \quad (30.1\%) \\
& P(d=9) = \log_{10}(1 + 1/9) = \log_{10}(10/9) \approx 0.046 \quad (4.6\%) \\
\\
& \text{\textbf{Why does this happen? The core reason is scale invariance.}} \\
& \text{The law applies to data whose logarithms are uniformly distributed.} \\
& \text{The first digit is '1' when a number } x \text{ is between } 1 \cdot 10^k \text{ and } 2 \cdot 10^k. \\
& \text{The length of this interval on a log scale is } \log_{10}(2) - \log_{10}(1) = 0.301. \\
\\
& \text{\textbf{Applications:}} \text{ This pattern appears in financial data, city populations, physical} \\
& \text{constants, etc. Accountants use it to spot fabricated numbers in} \\
& \text{tax returns, as human-invented numbers often fail to follow the law.}
\end{aligned}
$$$
      </div>
    </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="border-t border-gray-700 mt-20">
        <div class="container mx-auto px-6 py-10 text-center">
            <p class="text-2xl font-bold mb-4 text-white">Get in Touch</p>
            <p class="text-gray-300 mb-6">Open to new opportunities and collaborations.</p>
            <a href="mailto:rohit121746@gmail.com" class="inline-block bg-white text-black px-6 py-3 rounded-md hover:bg-gray-200 transition-colors duration-300">
                rohit121746@gmail.com
            </a>
            <div class="flex justify-center space-x-6 mt-8">
                <a href="https://www.linkedin.com/in/rohit-rawat-5aa3b92a6/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white">LinkedIn</a>
                <a href="https://github.com/rrawatt" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white">Github</a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Page Navigation Logic ---
            const pages = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('header a');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuButton = document.getElementById('mobile-menu-button');

            function setActiveLink(pageId) {
                navLinks.forEach(link => {
                    if (link.getAttribute('href') === `#${pageId}`) {
                        link.classList.add('text-white', 'font-bold');
                        link.classList.remove('text-gray-300');
                    } else {
                        link.classList.remove('text-white', 'font-bold');
                        link.classList.add('text-gray-300');
                    }
                });
            }

            function showPage(pageId) {
                let pageFound = false;
                pages.forEach(page => {
                    if (page.id === pageId) {
                        page.classList.remove('hidden');
                        pageFound = true;
                    } else {
                        page.classList.add('hidden');
                    }
                });
                if (!pageFound) {
                    document.getElementById('about')?.classList.remove('hidden');
                    setActiveLink('about');
                } else {
                    setActiveLink(pageId);
                }
            }

            function handleNavigation() {
                const pageId = window.location.hash.substring(1) || 'about';
                showPage(pageId);
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        e.preventDefault();
                        window.location.hash = href.substring(1);
                        mobileMenu.classList.add('hidden');
                    }
                });
            });
            
            menuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            window.addEventListener('hashchange', handleNavigation);
            handleNavigation();

            // --- KaTeX Rendering ---
            const latexContainer = document.getElementById("latex-example");
            if (latexContainer) {
                 renderMathInElement(latexContainer, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false},
                        {left: '\\(', right: '\\)', display: false}, {left: '\\[', right: '\\]', display: true}
                    ],
                    throwOnError: false
                });
            }

            // --- Puzzle Corner: 24 Game Logic ---
            const puzzleNumbersEl = document.getElementById('puzzle-numbers');
            const puzzleInput = document.getElementById('puzzle-input');
            const checkPuzzleBtn = document.getElementById('check-puzzle-btn');
            const newPuzzleBtn = document.getElementById('new-puzzle-btn');
            const puzzleFeedback = document.getElementById('puzzle-feedback');

            const puzzles = [
                { numbers: [8, 6, 2, 7] }, { numbers: [4, 7, 8, 8] }, { numbers: [1, 2, 3, 4] },
                { numbers: [6, 6, 6, 6] }, { numbers: [3, 3, 7, 7] }
            ];
            let currentPuzzle;

            function generateNewPuzzle() {
                const newPuzzleIndex = Math.floor(Math.random() * puzzles.length);
                currentPuzzle = puzzles[newPuzzleIndex];
                puzzleNumbersEl.textContent = currentPuzzle.numbers.join(' ');
                puzzleInput.value = '';
                puzzleFeedback.textContent = '';
            }

            function checkPuzzleSolution() {
                const solution = puzzleInput.value;
                puzzleFeedback.textContent = '';
                puzzleFeedback.classList.remove('text-red-400', 'text-green-400');

                if (!solution) {
                    puzzleFeedback.textContent = 'Please enter a solution.';
                    puzzleFeedback.classList.add('text-red-400');
                    return;
                }

                const numbersInSolution = solution.match(/\d+/g);
                if (!numbersInSolution) {
                    puzzleFeedback.textContent = "Your solution doesn't contain any numbers.";
                    puzzleFeedback.classList.add('text-red-400');
                    return;
                }

                const sortedPuzzleNumbers = [...currentPuzzle.numbers].map(String).sort();
                const sortedSolutionNumbers = numbersInSolution.sort();

                if (JSON.stringify(sortedPuzzleNumbers) !== JSON.stringify(sortedSolutionNumbers)) {
                    puzzleFeedback.textContent = "Please use only the numbers provided.";
                    puzzleFeedback.classList.add('text-red-400');
                    return;
                }

                try {
                    // Sanitize expression: only allow numbers, operators, and parentheses
                    if (/[^0-9+\-*/().\s]/.test(solution)) {
                       throw new Error("Invalid characters used.");
                    }
                    const result = new Function('return ' + solution)();
                    if (Math.abs(result - 24) < 1e-9) {
                        puzzleFeedback.textContent = "Correct! Well done.";
                        puzzleFeedback.classList.add('text-green-400');
                    } else {
                        puzzleFeedback.textContent = `Result is ${result.toFixed(2)}, not 24. Try again!`;
                        puzzleFeedback.classList.add('text-red-400');
                    }
                } catch (e) {
                    puzzleFeedback.textContent = "Invalid mathematical expression.";
                    puzzleFeedback.classList.add('text-red-400');
                }
            }

            if (checkPuzzleBtn) {
                checkPuzzleBtn.addEventListener('click', checkPuzzleSolution);
                newPuzzleBtn.addEventListener('click', generateNewPuzzle);
                puzzleInput.addEventListener('keyup', (event) => {
                    if (event.key === 'Enter') {
                        checkPuzzleSolution();
                    }
                });
                generateNewPuzzle(); // Load first puzzle
            }

            // --- Puzzle Corner: Favorite Puzzles Logic ---
            const solutionToggles = document.querySelectorAll('.toggle-solution-btn');
            solutionToggles.forEach(button => {
                button.addEventListener('click', () => {
                    const solutionDiv = button.nextElementSibling;
                    if (solutionDiv && solutionDiv.classList.contains('solution')) {
                        solutionDiv.classList.toggle('hidden');
                        button.textContent = solutionDiv.classList.contains('hidden') ? 'Show Solution' : 'Hide Solution';
                    }
                });
            });
        });
    </script>

</body>
</html>

